/*!!
 * Power Panel Router <https://github.com/carlos-sweb/pp-router>
 * @author Carlos Illesca
 * @version 1.1.0 (2020/05/08 08:53 AM)
 * Released under the MIT License
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ppRouter",e):(t=t||self,"undefined"==typeof ppView?t.ppRouter=e():t.ppRouter=e(ppView))}(this,(function(t){return function(e){function i(t){return t&&"[object Function]"==={}.toString.call(t)}this.routes=e||{},this.addRoute=function(t,e){this.routes[t]=e},this.removeRoute=function(t){for(var e=Object.keys(this.routes),i=0;i<e.length;i++)if(e[i]==t){delete this.routes[t];break}},this.history=window.history,this.location=window.location,this.params=null,window.addEventListener("hashchange",function(){this.run()}.bind(this)),this.redirect=function(t){this.url_redirect=t},this.run=function(){var n=this.location.hash;""===n&&(n+="/",this.location.hash="/");const o=Object.keys(e);for(var r=0;r<o.length;r++){const e=this.checkHash(n,o[r]);this.view=void 0===t?void 0:new t(this.routes[o[r]]),void 0===this.view?e&&i(this.routes[o[r]].controller)&&this.routes[o[r]].controller(this.params):e&&i(t.controller)&&t.controller(this.params),r+1==o.length&&(i(this.noFound)&&this.noFound(this.location),"string"==typeof this.url_redirect&&(this.location.hash=this.url_redirect))}},this.checkHash=function(t,e){if(t.replace("#","")==e&&-1==e.indexOf(":"))return!0;for(var i,n=new RegExp(/\/[(\:)]{1}([a-z,A-Z,0-9,\-,\_]{0,})[\(](string|any|number)[\)]/g),o="^#"+e,r=[];null!=(i=n.exec(e));)switch(r.push(i),i[2]){case"number":o=o.replace(i[0],"/([0-9]{1,})");break;case"any":o=o.replace(i[0],"/([0-9A-Za-z]{1,})");break;case"string":o=o.replace(i[0],"/([A-Za-z-_]{1,})")}o=o.replaceAll("/","[\\/]{1}"),o+="$";var s=new RegExp(o).exec(t);if(null!=s){var h=new Object;return r.forEach(((t,e)=>{h[t[1]]=s[e+1]})),this.params=h,!0}return this.params=null,!1},this.start=function(t){"string"==typeof t&&(this.location.hash=t),this.run()}}}));